var bindy;(()=>{"use strict";var __webpack_modules__={120:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.NewController=void 0;const logging_1=__webpack_require__(570),directives_1=__webpack_require__(960),abstract_directives_1=__webpack_require__(106),loop_directives_1=__webpack_require__(863),input_directives_1=__webpack_require__(243),event_directives_1=__webpack_require__(618);class NewController extends abstract_directives_1.Directive{constructor(e){super("[bind-controller]"),this.scope=new Map,this.bindings=new Map,this.scope=e,this.logger=new logging_1.Logger("Bindy-Controller",logging_1.Level.VERBOSE)}get(expression,target=this.scope){try{if(expression)return eval(`target.${expression}`)}catch(ex){try{return eval(expression)}catch{this.logger.log(logging_1.Level.ERROR,"failed to fetch property",expression,"from",target)}}return target}compile(e,t=this){directives_1.DIRECTIVES.forEach((r=>{e.querySelectorAll(r.selector).forEach((e=>{if(e.nodeType===Node.ELEMENT_NODE){let i;if(r instanceof abstract_directives_1.StrBindDirective)i=new abstract_directives_1.StrBindDirective(e);else if(r instanceof loop_directives_1.ForLoopDirective)i=new loop_directives_1.ForLoopDirective(e);else if(r instanceof event_directives_1.ClickableDirective)i=new event_directives_1.ClickableDirective(e);else{if(!(r instanceof input_directives_1.InputModelDirective))throw"Unrecognised directive "+e;i=new input_directives_1.InputModelDirective(e)}const s=i.render(t);s&&(this.bindings.has(s)||this.bindings.set(s,[]),this.bindings.get(s)?.push(i))}}))}))}update(expression,value,target=this.scope){try{return eval(`target.${expression} = value`),this.logger.log(logging_1.Level.VERBOSE,"updated property",expression,"set to",value),this.bindings.has(expression)&&this.bindings.get(expression)?.forEach((e=>{e.render(this)})),!0}catch(e){this.logger.log(logging_1.Level.ERROR,"failed to update property",expression),this.logger.log(logging_1.Level.ERROR,e)}return!1}render(e=this,t){}}exports.NewController=NewController},334:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VisibilityDirective=void 0;const i=r(106);class s extends i.Directive{constructor(){super("[bind-show]")}render(e,t){const r=this.target.getAttribute(this.attr);if(r){const t=e.get(r);this.target.style.visibility=t?"":"hidden"}}}t.VisibilityDirective=s},106:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StrBindDirective=t.Directive=void 0;class r{constructor(e,t){this.selector="bind-attr",this.expression="",this.selector=e;let r=e.match(/\[([\w\-]+)\]/);this.attr=r[1],t&&(this.expression=t.getAttribute(this.attr)||"",this.target=t,this.template=document.createElement(t.tagName),this.template.innerHTML=t.innerHTML,this.template.className=t.className)}render(e,t){}}t.Directive=r,t.StrBindDirective=class extends r{constructor(e){super("[bind-str]",e)}render(e,t){if(this.target.textContent=e.get(this.expression,t),this.expression)return this.expression}}},960:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DIRECTIVES=void 0;const i=r(334),s=r(106),o=r(863),n=r(243),c=r(618);t.DIRECTIVES=[new s.StrBindDirective,new o.ForLoopDirective,new n.InputModelDirective,new c.ClickableDirective,new i.VisibilityDirective]},618:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ClickableDirective=void 0;const i=r(106);class s extends i.Directive{constructor(e){super("[bind-click]",e)}render(e,t){if(this.expression){const r=Array.from(this.expression.matchAll(/[\w\.]+/g)),i=r[0][0],s=r.slice(1).map((e=>e[0]));let o;o="update"===i?e.update:e.get(i,t),"function"==typeof o&&(this.target.onclick=function(r){const i=Array.from(s).map((r=>e.get(r,t)));o.apply(e,[s[0],...i])})}}}t.ClickableDirective=s},243:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InputModelDirective=void 0;const i=r(106);class s extends i.Directive{constructor(e){super("input[bind-model]",e),e&&(this.target=e)}render(e,t){const r=this.target.getAttribute(this.attr);r&&(this.target.value=e.get(r,t),this.target.oninput=function(i){if(!i.target)return;const s=i.target.value;e.update(r,s,t)})}}t.InputModelDirective=s},863:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ForLoopDirective=void 0;const i=r(120),s=r(106);class o extends s.Directive{constructor(e){super("[bind-for]",e)}render(e,t){const r=document.createDocumentFragment(),s=e.get(this.expression,t);Array.isArray(s)&&(this.target.appendChild(document.createComment(`for ${this.expression} in ${this.expression}`)),s.forEach((e=>{const t=this.template.cloneNode(!0);r.append(t),new i.NewController(e).compile(t)})),this.target.className="",this.target.innerHTML="",this.target.replaceChildren(r))}}t.ForLoopDirective=o},570:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=t.Level=void 0,function(e){e[e.ERROR=0]="ERROR",e[e.WARNING=1]="WARNING",e[e.INFO=2]="INFO",e[e.VERBOSE=3]="VERBOSE"}(r=t.Level||(t.Level={})),t.Logger=class{constructor(e,t=r.VERBOSE){this.level=r.INFO,this.name=e,t&&(this.level=t)}log(e=r.INFO,...t){if(e<=this.level){const i=[(new Date).toLocaleTimeString(),`[${r[e].toLowerCase()}]`,this.name,""].join("\t|  ");switch(e){case r.INFO:console.info(i,...t);break;case r.WARNING:console.warn(i,...t);break;case r.VERBOSE:console.debug(i,...t);break;case r.ERROR:default:console.error(i,...t)}}}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}var __webpack_exports__={};(()=>{var exports=__webpack_exports__;Object.defineProperty(exports,"__esModule",{value:!0});const controller_1=__webpack_require__(120);function bootstrap(){const elem=document.querySelector("[bind-app]"),bindExpression=elem?.getAttribute("bind-app");if(!elem)return;let dataObj={};if(bindExpression)try{dataObj=eval(bindExpression)}catch(e){}const rootCtrl=new controller_1.NewController(dataObj);rootCtrl.compile(elem),window.app=rootCtrl}exports.default=bootstrap,window.onload=bootstrap})(),bindy=__webpack_exports__})();