var bindy;(()=>{"use strict";var __webpack_modules__={120:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.Controller=void 0;const logging_1=__webpack_require__(570),directives_1=__webpack_require__(960),abstract_directives_1=__webpack_require__(106),loop_directives_1=__webpack_require__(863),input_directives_1=__webpack_require__(243),event_directives_1=__webpack_require__(618),class_directive_1=__webpack_require__(42),style_directive_1=__webpack_require__(307);class Controller extends abstract_directives_1.Directive{constructor(e){super("[bind-controller]"),this.bindings=new Map;const t=this;this.scope=new Proxy(e,{set:(e,i,r,s)=>(e[i]=r,t.postUpdate(i),!0),get:(e,t,i)=>e[t]}),this.logger=new logging_1.Logger("Bindy-Controller",logging_1.Level.VERBOSE)}resolve(e,t=this.scope){let i=!1;e.startsWith("!")&&(e=e.replace("!",""),i=!0);const r=e.split("."),s=1===r.length;if(void 0!==t[r[0]])return s?i?!t[r[0]]:t[r[0]]:this.resolve(r.slice(1).join("."),t[r[0]]);if(window[r[0]])return s?window[r[0]]:this.resolve(r.slice(1).join("."),window);try{const t=JSON.parse(`{"value": ${e}}`);return i?!t.value:t.value}catch(i){this.logger.log(logging_1.Level.WARNING,"failed to fetch property",e,"from",t)}}compile(e,t=this){directives_1.DIRECTIVES.forEach((t=>{e.querySelectorAll(t.selector).forEach((e=>{if(e.nodeType===Node.ELEMENT_NODE){let i;if(t instanceof abstract_directives_1.StrBindDirective)i=new abstract_directives_1.StrBindDirective(e);else if(t instanceof loop_directives_1.ForLoopDirective)i=new loop_directives_1.ForLoopDirective(e);else if(t instanceof event_directives_1.ClickableDirective)i=new event_directives_1.ClickableDirective(e);else if(t instanceof input_directives_1.InputModelDirective)i=new input_directives_1.InputModelDirective(e);else if(t instanceof abstract_directives_1.VisibilityDirective)i=new abstract_directives_1.VisibilityDirective(e);else if(t instanceof class_directive_1.ClassDirective)i=new class_directive_1.ClassDirective(e);else{if(!(t instanceof style_directive_1.StyleDirective))throw"Unrecognised directive "+e;i=new style_directive_1.StyleDirective(e)}for(let e of i.bindings())e=(0,directives_1.sanitizeExpression)(e),this.bindings.has(e)||this.bindings.set(e,[]),this.bindings.get(e)?.push(i)}}))})),this.render()}update(expression,value,target=this.scope){try{return eval(`target.${expression} = value`),this.logger.log(logging_1.Level.VERBOSE,"updated property",expression,"set to",value),this.postUpdate(expression),!0}catch(e){this.logger.log(logging_1.Level.ERROR,"failed to update property",expression),this.logger.log(logging_1.Level.ERROR,e)}return!1}postUpdate(e){this.logger.log(logging_1.Level.VERBOSE,"triggering post updates for property",e),this.bindings.has(e)&&this.bindings.get(e)?.forEach((e=>{e.render(this)}))}render(e=this,t){this.bindings.forEach(((i,r)=>{i.forEach((i=>{i.render(e,t)}))}))}}exports.Controller=Controller},106:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VisibilityDirective=t.StrBindDirective=t.Directive=void 0;class i{constructor(e,t){this.selector="bind-attr",this.expression="",this.selector=e;let i=e.match(/\[([\w\-]+)\]/);this.attr=i[1],t&&(this.expression=t.getAttribute(this.attr)||"",this.target=t,this.template=document.createElement(t.tagName),this.template.innerHTML=t.innerHTML,this.template.className=t.className)}bindings(){return[this.expression]}render(e,t){}}t.Directive=i,t.StrBindDirective=class extends i{constructor(e){super("[bind-str]",e)}render(e,t){this.target.textContent=e.resolve(this.expression,t)}},t.VisibilityDirective=class extends i{constructor(e){super("[bind-if]",e),this.prevDisplay=this.target?.style.display}render(e,t){const i=e.resolve(this.expression,t);this.target.style.display=i?this.prevDisplay||"block":"none"}}},42:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ClassDirective=t.parseProperties=void 0;const r=i(106);function s(e){function t(e,t=!1){let i=/[\'\"\{\}]/gm;return t&&(i=/[\{\}]/gm),e.trim().replace(i,"")}const i=new Map,r=e.split(",");for(let e of r){const[r,s]=e.split(":");i.set(t(r),t(s,!0))}return i}t.parseProperties=s;class o extends r.Directive{constructor(e){super("[bind-class]",e),this.props=new Map,this.expression&&this.expression.startsWith("{")&&(this.props=s(this.expression))}bindings(){return[...this.props.values()]}render(e,t){this.props.size>0?this.props.forEach(((t,i)=>{e.resolve(t)?this.target.classList.add(i):this.target.classList.remove(i)})):this.target.className=e.resolve(this.expression)}}t.ClassDirective=o},960:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeExpression=t.DIRECTIVES=void 0;const r=i(106),s=i(863),o=i(243),n=i(618),c=i(307),l=i(42);t.DIRECTIVES=[new r.StrBindDirective,new s.ForLoopDirective,new o.InputModelDirective,new n.ClickableDirective,new r.VisibilityDirective,new c.StyleDirective,new l.ClassDirective],t.sanitizeExpression=function(e){return e.replace("!","").trim()}},618:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ClickableDirective=void 0;const r=i(106);class s extends r.Directive{constructor(e){super("[bind-click]",e)}render(e,t){if(this.expression){const i=Array.from(this.expression.matchAll(/[\w\.]+/g)),r=i[0][0],s=i.slice(1).map((e=>e[0]));let o;o="update"===r?e.update:e.resolve(r,t),"function"==typeof o&&(this.target.onclick=function(i){const r=s.map((i=>e.resolve(i,t)));o.apply(e,r)})}}}t.ClickableDirective=s},243:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InputModelDirective=void 0;const r=i(106);class s extends r.Directive{constructor(e){super("input[bind-model]",e),e&&(this.target=e)}render(e,t){const i=this.target.getAttribute(this.attr);return i&&(this.target.value=e.resolve(i,t),this.target.oninput=function(r){if(!r.target)return;const s=r.target.value;e.update(i,s,t)}),this.expression}}t.InputModelDirective=s},863:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ForLoopDirective=void 0;const r=i(120),s=i(106);class o extends s.Directive{constructor(e){super("[bind-for]",e)}render(e,t){const i=document.createDocumentFragment(),s=e.resolve(this.expression,t);Array.isArray(s)&&(this.target.appendChild(document.createComment(`for ${this.expression} in ${this.expression}`)),s.forEach((e=>{const t=this.template.cloneNode(!0);i.append(t),new r.Controller(e).compile(t)})),this.target.className="",this.target.innerHTML="",this.target.replaceChildren(i))}}t.ForLoopDirective=o},307:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StyleDirective=void 0;const r=i(106),s=i(42);class o extends r.Directive{constructor(e){super("[bind-style]",e),this.props=new Map,this.expression.startsWith("{")&&(this.props=(0,s.parseProperties)(this.expression))}bindings(){return[...this.props.values()]}render(e,t){this.props.size>0&&this.props.forEach(((t,i)=>{const r=e.resolve(t);r&&(this.target.style[i]=r)}))}}t.StyleDirective=o},570:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=t.Level=void 0,function(e){e[e.ERROR=0]="ERROR",e[e.WARNING=1]="WARNING",e[e.INFO=2]="INFO",e[e.VERBOSE=3]="VERBOSE"}(i=t.Level||(t.Level={})),t.Logger=class{constructor(e,t=i.VERBOSE){this.level=i.INFO,this.name=e,t&&(this.level=t)}log(e=i.INFO,...t){if(e<=this.level){const r=[(new Date).toLocaleTimeString(),`[${i[e].toLowerCase()}]`,this.name,""].join("\t|  ");switch(e){case i.INFO:console.info(r,...t);break;case i.WARNING:console.warn(r,...t);break;case i.VERBOSE:console.debug(r,...t);break;case i.ERROR:default:console.error(r,...t)}}}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var i=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](i,i.exports,__webpack_require__),i.exports}var __webpack_exports__={};(()=>{var exports=__webpack_exports__;Object.defineProperty(exports,"__esModule",{value:!0});const controller_1=__webpack_require__(120);function bootstrap(){const elem=document.querySelector("[bind-app]"),bindExpression=elem?.getAttribute("bind-app");if(!elem)return;let dataObj={};if(bindExpression)try{dataObj=eval(bindExpression)}catch(e){}const rootCtrl=new controller_1.Controller(dataObj);eval(`${bindExpression} = rootCtrl.scope`),rootCtrl.compile(elem),window.app=rootCtrl}exports.default=bootstrap,window.addEventListener("load",bootstrap,!0)})(),bindy=__webpack_exports__})();